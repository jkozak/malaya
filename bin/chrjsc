#!/usr/bin/env node

var   parser = require('../parser.js');
var compiler = require('../compiler.js');
var       fs = require('fs');
var   recast = require('recast');

compiler.debug = true;

for (var i=2;i<process.argv.length;i++) {
    var source = process.argv[i];
    var target = source+'.js';
    fs.writeFileSync(target,recast.print(compiler.compile(parser.parse(fs.readFileSync(source),{attrs:true}))).code);
}
