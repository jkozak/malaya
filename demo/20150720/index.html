<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>reveal.js - The HTML Presentation Framework</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
     var link = document.createElement( 'link' );
     link.rel = 'stylesheet';
     link.type = 'text/css';
     link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
     document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
	<section>
	  <section>
	    <h2>Background</h2>
	    <h3>The last 20 years</h3>
	  </section>
	  <section>
	    <h2>2015 vs 1995</h2>
	    <h3>Hardware</h3>
	    <ul>
	      <li>RAM is a tenth of the price of disk</li>
	      <li>CPU about a thousand times cheaper</li>
	      <li>Networks a hundred times faster</li>
	    </ul>
	  </section>
	  <section>
	    <h2>2015 vs 1995</h2>
	    <h3>Software</h3>
	    <ul>
	      <li>HTTP</li>
	      <li>HTML</li>
	      <li>Lisp goes quietly mainstream</li>
	      <li>Free Software</li>
	    </ul>
	  </section>
	  <section>
	    <h2>2015 vs 1995</h2>
	    <p>
	      So much improvement that some things formerly impractical are now trivial.
	    </p>
	  </section>
	</section>

	<section>
	  <section>
	    <h2>Malaya</h2>
	    <img width="160" height="160" data-src="logo.png"/>
	    <p>A toolkit for building trading systems and suchlike</p>
	  </section>
	  <section>
	    <h2>reduce architectural complexity</h2>
	    <p>uniform data representation</p>
	  </section>
	  <section>
	    <h2>reuse mechanisms everywhere</h2>
	    <p>don't have multiple ways of doing the same thing</p>
	  </section>
	  <section>
	    <h2>Message Streaming</h2>
	    <p>all any system like this does is pass messages around, generate new ones, and log this activity</p>
	  </section>
	  <section>
	    <h2>Ultra High Level Language</h2>
	    <p>specification language - logic/relational hybrid</p>
	    <p>makes sense to domain experts (hopefully)</p>
	    <p>operates on "data representation" directly</p>
	  </section>
	</section>

	<section>
	  <section>
	    <h2>Goals - uncontroversial</h2>
	    <ul>
	      <li>fast</li>
	      <li>small</li>
	      <li>easy to modify</li>
	      <li>secure</li>
	      <li>robust</li>
	      <li>fault tolerant</li>
	      <li>high capacity</li>
	    </ul>
	  </section>
	  <section>
	    <h2>fast</h2>
	    <p>Quite pleased with performance.</p>
	    <p>Some optimisations made, more to come.  </p>
	    <p>We run benchmarks routinely to see if something has gone awry with performance.</p>
	  </section>
	  <section>
	    <h2>small</h2>
	    <p>It is.
	  </section>
	  <section>
	    <h2>easy to modify</h2>
	    <p>Yes, but learning curve is quite steep at the moment.</p>
	  </section>
	  <section>
	    <h2>secure</h2>
	    <ul>
	      <li>Any storage can be encrypted.</li>
	      <li>Secure protocols will be offered (<code>https</code>,<code>wss</code>).</li>
	      <li>Will use certificates where practical.</li>
	    </ul>
	  </section>
	  <section>
	    <h2>robust</h2>
	    <ul>
	      <li>Automatic testing...</li>
	      <li>... different kinds...</li>
	      <li>... lots of it.</li>
	      <li>Will run automatically on various platforms.</li>
	    </ul>
	  </section>
	  <section>
	    <h2>fault tolerant</h2>
	    <p>How to recover from a server hardware failure?</p>
	    <p>Update streaming gives multiple hot standby systems.</p>
	  </section>
	  <section>
	    <h2>high capacity</h2>
	    <p>We can connect a respectable numbers of clients at the moment.</p>
	    <p>We will offer connection clustering.</p>
	  </section>
	</section>

	<section>
	  <section>
	    <h2>Goals - controversial</h2>
	    <ul>
	      <li>use existing protocols</li>
	      <li>use existing data formats</li>
	      <li>use existing frameworks</li>
	      <li>use existing UI</li>
	      <li>use existing code</li>
	    </ul>
	  </section>
	  <section>
	    <h2>protocols</h2>
	    <h3>HTTP</h3>
	    <h3>HTTPS</h3>
	    <p>Mature and proven, used everywhere, all the time</p>
	    <h3>WebSockets</h3>
	    <p>Simple data feed extension to the above</p>
	  </section>
	  <section>
	    <h2>data formats</h2>
	    <h3>JSON</h3>
	    <p>Based on the data notation from javascript.</p>
	    <p>Simple, but general enough to represent all non-exotic structures.</p>
	    <pre>['price', {stock:'WAR',user:"Joe Bloggs",buy:true,volume:50}]</pre>
	  </section>
	  <section>
	    <h2>frameworks</h2>
	    <h3>nodejs</h3>
	    <p>Malaya is layered on top of this.  Same language as used
	    in web browser - javascript - running on server.  Widely endorsed, even by Microsoft.</p>
	    <h3>react</h3>
	    <p>Web browser UI toolkit from Facebook</p>
	  </section>
	  <section>
	    <h2>UI</h2>
	    <h3>web browser</h3>
	    <p>Now no reason to use anything else.</p>
	    <p>Preferred style is HTML single-page application communicating via websockets.</p>
	    <p>Can also be multi-window and bundled as a binary.</p>
	  </section>
	  <section>
	    <h2>code</h2>
	    <h3>npm library</h3>
	    <p>Vast collection of code to glue to pretty much any system known.</p>
	  </section>
	</section>

	<section>
	  <h2>A Malaya system</h2>
	  <ul>
	    <li>has a container into which JSON items can be put</li>
	    <li>these items cover <u>all</u> data, static, market, whatever</li>
	    <li>has 'rules' in its language which act on these items...</li>
	    <ul>
	      <li>... deleting</li>
	      <li>... adding</li>
	    </ul>
	    <li>has a  runtime which...</li>
	    <ul>
	      <li>... inserts items from clients into the container</li>
	      <li>... sends new items from container to client(s)</li>
	    </ul>
	  </ul>
	</section>
	
	<section>
	  <section>
	    <h2>Malaya rules</h2>
	    <pre>
rule (-['price', {volume:0, ...}]);
	      
rule (-['price', {user:uB, stock, rate, volume:vB, buy:true,  ...rB}],
      -['price', {user:uS, stock, rate, volume:vS, buy:false, ...rS}],
       vT = Math.min(vB,vS),
      +['trade', {buyer:uB, seller:uS, stock, rate, volume:vT}],
      +['price', {user:uB, stock, rate, volume:vB-vT, buy:true,  ...rB}],
      +['price', {user:uS, stock, rate, volume:vS-vT, buy:false, ...rS}] );
	    </pre>
	  </section>
	  <section>
	    <h2>More Malaya rules</h2>
	    <pre>
rule (-['price', {volume:0, ...}]);

rule (-['price', {user:uB, stock, rate, volume:vB, buy:true,  ...rB}],
      -['price', {user:uS, stock, rate, volume:vS, buy:false, ...rS}],
       uB!==uS,	      
       vT = Math.min(vB,vS),
      +['trade', {buyer:uB, seller:uS, stock, rate,volume:vT}],
      +['price', {user:uB, stock, rate, volume:vB-vT, buy:true,  ...rB}],
      +['price', {user:uS, stock, rate, volume:vS-vT, buy:false, ...rS}] );
	    </pre>
	  </section>
	  <section>
	    <h2>Even more Malaya rules</h2>
	    <pre>
rule (-['price', {volume:0, ...}]);

rule (-['price', {user:uB, stock, rate, volume:vB, buy:true,  ...rB}],
      -['price', {user:uS, stock, rate, volume:vS, buy:false, ...rS}],
       ['user', {name:uB, company:cB, ...}],
       ['user', {name:uS, company:cS, ...}],
       cB!==cS,
       vT = Math.min(vB,vS),
      +['trade', {buyer:uB, seller:uS, stock, rate,volume:vT}],
      +['price', {user:uB, stock, rate, volume:vB-vT, buy:true,  ...rB}],
      +['price', {user:uS, stock, rate, volume:vS-vT, buy:false, ...rS}] );
	    </pre>
	  </section>
	</section>

	<section>
	  <h2>Message streams - plumbing</h2>
	  <p>JSON messages stream into and out of Malaya systems.</p>
	  <p>They are logged to disk, giving both an audit log and a means of recovery in case of crashes.</p>
	  <p>They can be streamed to other Malaya processes, locally or remotely, giving hot standby and resilience.</p>
	</section>

	<section>
	  <h2>Auditability</h2>
	  <p>Log files are hash-chained;  tampering can always be detected.</p>
	  <p>Can play back log files to see what happened at any point in a system's history.</p>
	  <p>Every file acted on or shipped is logged: can always establish exactly what was sent when to whom.</p>
	</section>

	<section>
	  <h2>Data Integrity</h2>
	  <p>Sometimes, changes need to the system's data model (a "schema change" in SQL terms).</p>
	  <p>In Malaya, this is done by specialised sets of rules which run within the auditing framework - the activity is completely captured and can be undone.</p>
	</section>

	<section>
	  <h2>Runtime Environment</h2>
	  <p>Runs on anything (windows,linux,mac,others).</p>
	  <p>Fairly modest hardware requirements.</p>
	</section>

	<section>
	  <section>
	    <h2>Demo!</h2>
	  </section>
	  <section>
	    <h2>URL</h2>
	    <p><code>http://10.1.1.40:3000/</code>
	    <h2>Logon</h2>
	    <p>Password <code>123</code> - user one of:
	    <small>
	      <ul style="list-style-type:none">
		<li><code>Colin Mclauchlan</code></li>
		<li><code>David Irvine</code></li>
		<li><code>David Wileman</code></li>
		<li><code>Deepu James</code></li>
		<li><code>Gavin Martin</code></li>
		<li><code>Harsha Prabhala</code></li>
		<li><code>Jared Inxster</code></li>
		<li><code>Lee Bettridge</code></li>
		<li><code>Mark Dodds</code></li>
		<li><code>Martin Carey</code></li>
		<li><code>Sean Tamm</code></li>
		<li><code>Vishal Barot</code></li>
	      </ul>
	    </small>
	    </p>
	  </section>
	</section>

	<section>
	  <h2>Project status</h2>
	  <table>
	    <tbody>
	      <tr><td>language</td><td>stable</td></tr>
	      <tr><td>runtime</td><td>stable</td></tr>
	      <tr><td>UI</td><td>started</td></tr>
	    </tbody>
	  </table>
	</section>

	<section>
	  <h2>Questions?</h2>
	</section>

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

     // Full list of configuration options available at:
     // https://github.com/hakimel/reveal.js#configuration
     Reveal.initialize({
       controls: true,
       progress: true,
       history: true,
       center: true,

       transition: 'slide', // none/fade/slide/convex/concave/zoom

       // Optional reveal.js plugins
       dependencies: [
	 { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
	 { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
	 { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
	 { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
	 { src: 'plugin/zoom-js/zoom.js', async: true },
	 { src: 'plugin/notes/notes.js', async: true }
         //,{ src: 'plugin/remotes/remotes.js', async: true }
       ]
     });

    </script>

  </body>
</html>
